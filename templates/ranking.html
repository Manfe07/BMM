{% extends "index.html" %}
{% block pagetitle %}RankingüèÜ{% endblock %}
{% block content %}
    <table id="rankingTable"></table>

    <script>
        function updateTable(tableID) {
            let tableRef = document.getElementById(tableID);
            tableRef.innerHTML = "";

            $.getJSON('{{ url_for("getRanking") }}', function(data) {
                for(team in data){
                    let newRow = tableRef.insertRow(-1);
                    let teamCell = newRow.insertCell(0);
                    let cntCell = newRow.insertCell(1);
                    let beerCell = newRow.insertCell(2);
                    teamCell.setAttribute('class', 'columnTeam')
                    beerCell.setAttribute('class', 'columnBeer')
                    cntCell.setAttribute('class', 'columnCnt')
                    teamCell.innerHTML = data[team]["team"];
                    cntCell.innerHTML = data[team]["amount"];
                    for (let i = 0; i < data[team]["amount"]; i++) {
                        beerCell.innerHTML += "üç∫";
                    }
                }
            });
        }

        // Call addRow() with the table's ID
        updateTable("rankingTable")
        setInterval(updateTable, 60000, 'rankingTable')
    </script>
{% endblock %}
{% block style %}
<style>
    .beerTable{
        vertical-align: bottom;
        max-height: 25px;
    }
    .columnTeam{
        text-align: right;
        vertical-align: center;
        width:0.1%;
        white-space: nowrap;
        padding: 5px;
    }
    .columnCnt{
        text-align: right;
        vertical-align: center;
        width:0.1%;
        white-space: nowrap;
        padding-left: 5px;
    }
    .columnBeer{
        text-align: left;
        vertical-align: bottom;
        width: max-content;
        padding: 5px;
    }
    tr:nth-child(odd) {
        background-color: #b0ceff;
    }
    tr:nth-child(even) {
        background-color: #d9e7ff;
    }
</style>
{% endblock %}